<!DOCTYPE html>
<!--suppress ALL -->
<html lang="en">
<head>
    <meta name="generator" content="Quarkdown">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="quarkdown:root-path" content="..">
    <meta name="quarkdown:search-index" content="../search-index.json">
    <title>Subdocuments</title>
    <script src="../script/quarkdown.js"></script>
    <script>const capabilities = window.quarkdownCapabilities</script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../theme/theme.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.9.0/highlightjs-line-numbers.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css"/>
    <script>capabilities.code = true;</script>

    <style>

        body {
        }

        .page-break {
            break-before: always;
        }

        .quarkdown-plain .page-break {
            break-before: avoid;
            break-after: avoid;
        }

        body.quarkdown-plain.quarkdown-plain,
        body.quarkdown-docs.quarkmarkdown-docs {
        }

        body.quarkdown-slides.quarkdown-slides .reveal {
        }

        @page {
            size: auto auto;
        }

        p {
        }
    </style>
    <script>
        const doc = new DocsDocument();
        prepare(doc);
    </script>
    <template id="sidebar-template">
        <nav class="sidebar" role="doc-toc">
            <ol><li data-target-id="referencing-subdocuments" data-depth="2"><a href="#referencing-subdocuments">Referencing subdocuments</a></li><li data-target-id="context-inheritance" data-depth="2"><a href="#context-inheritance">Context inheritance</a></li><li data-target-id="working-directory" data-depth="2"><a href="#working-directory">Working directory</a></li><li data-target-id="subdocument-graph" data-depth="2"><a href="#subdocument-graph">Subdocument graph</a></li><li data-target-id="output" data-depth="2"><a href="#output">Output</a><ol><li data-target-id="html" data-depth="3"><a href="#html">HTML</a></li><li data-target-id="pdf" data-depth="3"><a href="#pdf">PDF</a></li><li data-target-id="minimizing-name-collisions" data-depth="3"><a href="#minimizing-name-collisions">Minimizing name collisions</a></li></ol></li></ol>
        </nav>
    </template>
</head>
<body class="quarkdown quarkdown-docs">
<header>
    <aside class="margin-area"></aside>
    <main>
        <div class="search-wrapper">
            <div class="search-field">
                <i class='bi bi-search'></i>
                <input id="search-input" type="text" placeholder="Search" autocomplete="off">
                <kbd>/</kbd>
            </div>
        </div>
    </main>
    <aside class="margin-area"></aside>
</header>
<div class="content-wrapper">
    <aside id="margin-area-left" class="margin-area">
        <div class="position-top"></div>
        <div class="position-middle"></div>
        <div class="position-bottom"></div>
    </aside>
    <main>
        <style data-hidden="">.page-margin-top-left a {
    display: flex !important;
}

header .version {
    opacity: 0.6 !important;
}

.quarkdown-output {
    padding: 12px 16px !important;
    border-radius: 8px !important;
    background-color: var(--box-header-background-color) !important;
}

.quarkdown-output:empty::after {
    content: "(No output)" !important;
    color: var(--qd-main-color-muted) !important;
}

.quarkdown-output :is(h1, h2, h3, h4, h5, h6) {
    padding: 0 !important;
    border: none !important;
}

.quarkdown-output :is(h1, h2, h3, h4, h5, h6):first-child {
    margin-top: 0 !important;
}

.quarkdown-output img[src*="sky"] {
    max-width: 50% !important;
}

.box:has(.quarkdown-output) pre {
    margin-bottom: 16px !important;
}</style><div class="page-margin-content page-margin-top-left" data-on-left-page="top-left" data-on-right-page="top-left"><div style="justify-content: flex-start; align-items: center; gap: 12.0px;" class="stack stack-row"><p><a href="https://quarkdown.com"><img src="media/banner-light@2065058880.svg" alt="Quarkdown" /></a></p><span class="version">1.13.0</span></div></div><div class="page-margin-content page-margin-top-right" data-on-left-page="top-right" data-on-right-page="top-right"><div style="justify-content: flex-start; align-items: center;" class="stack stack-row"><p><a href="/docs">Docs</a></p><hr /><p><a href="https://github.com/iamgio/quarkdown"><i class="icon-image bi bi-github" aria-hidden="true"></i></a></p></div></div><div class="page-margin-content page-margin-left-top" data-on-left-page="left-top" data-on-right-page="left-top"><nav role="navigation" data-role="page-list"><h3 id="getting-started" data-decorative="">Getting started</h3><ul><li><a href="../Quickstart">Quickstart</a></li></ul><h3 id="documentation" data-decorative="">Documentation</h3><ul><li><a href="https://quarkdown.com/docs/quarkdown-stdlib/">Stable ↗</a></li><li><a href="https://quarkdown.com/docs/latest/quarkdown-stdlib/">Latest build ↗</a></li></ul><h3 id="functions" data-decorative="">Functions</h3><ul><li><a href="../Syntax-of-a-function-call">Syntax of a function call</a><ul><li><a href="../Syntax-of-a-function-call#chaining-calls">Chaining calls</a></li><li><a href="../Syntax-of-a-function-call#block-vs-inline-function-calls">Block vs. inline calls</a></li></ul></li><li><a href="../Declaring-functions">Declaring functions</a></li><li><a href="../Typing">Dynamic typing</a></li><li><a href="../Localization">Localization</a></li></ul><h3 id="document-setup" data-decorative="">Document setup</h3><ul><li><a href="../Document-metadata">Document metadata</a><ul><li><a href="../Document-types">Document types</a></li></ul></li><li><a href="../Themes">Theme</a></li><li><a href="../Font-configuration">Fonts</a></li><li><a href="../Page-format">Page format</a><ul><li><a href="../Multi-column-layout">Multi-column layout</a></li></ul></li><li><a href="../Page-margin-content">Page margin content</a></li><li><a href="../Page-counter">Page counter</a></li><li><a href="../Persistent-headings">Persistent headings</a></li><li><a href="../Numbering">Numbering</a></li><li><a href="../Paragraph-style">Paragraph style</a></li><li><a href="../Caption-position">Caption position</a></li><li><a href="../Table-of-contents">Table of contents</a></li><li><a href="../Bibliography">Bibliography</a></li><li><a href="../Footnotes">Footnotes</a></li></ul><h3 id="markdown-enhancements" data-decorative="">Markdown enhancements</h3><ul><li><a href="../Figure">Figures</a></li><li><a href="../Image-size">Image size</a></li><li><a href="../TeX-formulae">TeX formulae</a></li><li><a href="../Table-caption">Table caption</a></li><li><a href="../Code-caption">Code caption</a></li><li><a href="../Numbering#decorative-headings">Decorative headings</a></li><li><a href="../Quote-types">Alerts (quote types)</a></li><li><a href="../Quotation-source">Quotation source</a></li><li><a href="../Cross-references">Cross-references</a></li><li><a href="../Page-break">Page breaks</a><ul><li><a href="../Page-break#automatic-break">Automatic break</a></li></ul></li><li><a href="../Text-symbols">Text symbols</a></li><li><a href="../Emojis">Emojis</a></li></ul><h3 id="layout" data-decorative="">Layout</h3><ul><li><a href="../Stacks">Stacks: rows, columns, grids</a></li><li><a href="../Container">Container</a></li><li><a href="../Align">Align</a></li><li><a href="../Float">Float</a></li><li><a href="../Custom-figure">Figure</a></li><li><a href="../Clip">Clip</a></li><li><a href="../Box">Box</a></li><li><a href="../Collapsible">Collapsible</a></li><li><a href="../Landscape-content">Landscape</a></li><li><a href="../Whitespace">Whitespace</a></li></ul><h3 id="multi-file-projects" data-decorative="">Multi-file projects</h3><ul><li><a href="../Including-other-Quarkdown-files">Including other Quarkdown files</a></li><li><a href="../Subdocuments" aria-current="page">Referencing other Quarkdown files</a><ul><li><a href="../Inclusion-vs-subdocuments">Including vs. referencing</a></li></ul></li><li><a href="../Importing-external-libraries">Importing external libraries</a></li></ul><h3 id="variables-amp-scripting" data-decorative="">Variables &amp; scripting</h3><ul><li><a href="../Variables">Variables</a></li><li><a href="../None">Optionality</a></li><li><a href="../Math">Math</a></li><li><a href="../Conditional-statements">Conditional statements</a></li><li><a href="../Loops">Loops</a></li><li><a href="../Let">Let</a></li><li><a href="../Destructuring">Destructuring</a></li></ul><h3 id="data-amp-tables" data-decorative="">Data &amp; tables</h3><ul><li><a href="../Table-manipulation">Table manipulation</a></li><li><a href="../Table-generation">Table generation</a></li><li><a href="../File-data#file-text-content">Text content from file</a></li><li><a href="../File-data#table-from-csv">Table from CSV data</a></li></ul><h3 id="charts-amp-diagrams" data-decorative="">Charts &amp; diagrams</h3><ul><li><a href="../XY-chart">XY chart</a></li><li><a href="../Mermaid-diagrams">Mermaid diagrams</a></li></ul><h3 id="text-amp-code" data-decorative="">Text &amp; code</h3><ul><li><a href="../Text">Advanced text formatting</a></li><li><a href="../Code">Advanced code block</a></li><li><a href="../Line-breaks">Explicit line breaks</a></li><li><a href="../TeX-macros">TeX macros</a></li></ul><h3 id="slides" data-decorative="">Slides</h3><ul><li><a href="../Slides-configuration">Slides configuration</a></li><li><a href="../Slides-fragment">Interactive fragment</a></li><li><a href="../Slides-speaker-notes">Speaker notes</a></li></ul><h3 id="native-content" data-decorative="">Native content</h3><ul><li><a href="../HTML">HTML</a></li><li><a href="../CSS">CSS</a></li></ul><h3 id="value-types" data-decorative="">Value types</h3><ul><li>String</li><li>Number</li><li><a href="../Markdown-content">Markdown content</a></li><li><a href="../Boolean">Boolean</a></li><li><a href="../None">None</a></li><li><a href="../Enumeration-entry">Enumeration entry</a></li><li><a href="../Iterable">Iterable</a></li><li><a href="../Dictionary">Dictionary</a></li><li><a href="../Range">Range</a></li><li><a href="../Lambda">Lambda</a></li><li><a href="../Sizes">Size(s)</a></li><li><a href="../Color">Color</a></li><li><a href="../Typing">Dynamic</a></li></ul><h3 id="built-in-libraries" data-decorative="">Built-in libraries</h3><ul><li><a href="../Paper-library">Paper: abstract, definitions, theorems</a></li></ul><h3 id="resources-amp-logging" data-decorative="">Resources &amp; logging</h3><ul><li><a href="../Media-storage">Media storage</a></li><li><a href="../Logging">Logging</a></li></ul><h3 id="cli-tools" data-decorative="">CLI tools</h3><ul><li><a href="../CLI-Compiler">Compiler</a></li><li><a href="../PDF-export">Exporting to PDF</a></li><li><a href="../CLI-Project-creator">Project creator</a></li><li><a href="../CLI-Webserver">Webserver</a></li></ul><h3 id="inside-quarkdown" data-decorative="">Inside Quarkdown</h3><ul><li><a href="../Pipeline">Quarkdown&rsquo;s pipeline</a><ul><li><a href="../Pipeline---Lexing">Lexing</a></li><li><a href="../Pipeline---Parsing">Parsing</a></li><li><a href="../Pipeline---Function-call-expansion">Function call expansion</a></li><li><a href="../Pipeline---Tree-traversal">Tree traversal</a></li><li><a href="../Pipeline---Rendering">Rendering</a></li><li><a href="../Pipeline---Post-rendering">Post-rendering</a></li></ul></li><li><a href="../Inside-live-preview">How does live preview work?</a></li></ul></nav></div><div class="page-margin-content page-margin-right-top" data-on-left-page="right-top" data-on-right-page="right-top"><h3 id="table-of-contents">On this page</h3><nav role="table-of-contents" data-role="table-of-contents"><ol><li data-target-id="referencing-subdocuments" data-depth="2"><a href="#referencing-subdocuments">Referencing subdocuments</a></li><li data-target-id="context-inheritance" data-depth="2"><a href="#context-inheritance">Context inheritance</a></li><li data-target-id="working-directory" data-depth="2"><a href="#working-directory">Working directory</a></li><li data-target-id="subdocument-graph" data-depth="2"><a href="#subdocument-graph">Subdocument graph</a></li><li data-target-id="output" data-depth="2"><a href="#output">Output</a><ol><li data-target-id="html" data-depth="3"><a href="#html">HTML</a></li><li data-target-id="pdf" data-depth="3"><a href="#pdf">PDF</a></li><li data-target-id="minimizing-name-collisions" data-depth="3"><a href="#minimizing-name-collisions">Minimizing name collisions</a></li></ol></li></ol></nav></div><h1 id="subdocuments" data-decorative="">Subdocuments</h1><p>When referring to a Quarkdown <em>document</em>, we are talking broadly about the group of resources that make up a Quarkdown project.</p><p>Commonly, especially in the case of knowledge management and wikis like this one, pages can have links that point to other pages, building a network of interconnected <em><strong>subdocuments</strong></em>.</p><p>In Quarkdown, a subdocument&rsquo;s entry point is a source file that is referenced by another subdocument. In practice, when I do <a href="../Quickstart">this</a>, I am referring to a subdocument.</p><p>Every project consists of at least one subdocument: the main one, called <em>root</em>.</p><blockquote class="note" style="--quote-type-label: 'Note';" data-labeled=""><p>Do not confuse subdocuments with <a href="../Including-other-Quarkdown-files">inclusion</a>. See <a href="../Inclusion-vs-subdocuments"><em>Inclusion vs. subdocuments</em></a> for a comparison.</p></blockquote><h2 id="referencing-subdocuments">Referencing subdocuments</h2><p>Whenever a Markdown link points to a local <span class="codespan-content"><code>.qd</code></span> or <span class="codespan-content"><code>.md</code></span> file, it is considered a reference to a subdocument.</p><pre><code class="language-markdown">[My subdocument](file.qd)</code></pre><p>Equivalently, you can use the <strong><span class="codespan-content"><code>.subdocument {path} {label?}</code></span></strong> <sup><a href="https://quarkdown.com/docs/quarkdown-stdlib/com.quarkdown.stdlib.module.Ecosystem/subdocument.html" target="_blank">docs ↗</a></sup> function:</p><pre><code class="language-markdown">.subdocument {file.qd} label:{My subdocument}</code></pre><p>Unlike the link syntax, the function accepts dynamic paths, making it suitable for more complex use cases. For instance, you can use it in combination with <a href="../File-data#listing-files-in-a-directory"><span class="codespan-content"><code>.listfiles</code></span></a> to automatically link all documents in a directory through a <a href="../Loops">for-each loop</a>:</p><pre><code class="language-markdown">.foreach {.listfiles {pages} sortby:{date} order:{descending}}
    path:
    .subdocument {.path} label:{.path::filename}</code></pre><figure><img src="media/list-files@94094373.png" alt="List files" style="width: 400.0px;" /></figure><p>Quarkdown makes sure a file is evaluated only once, so circular and recursive references are handled gracefully.</p><h2 id="context-inheritance">Context inheritance</h2><p>When referencing a subdocument, its content is evaluated like an independent Quarkdown document.</p><p>A relevant difference is that <strong>subdocuments inherit the referrer&rsquo;s context</strong>: document metadata, customizations, functions, variables, and more.</p><div class="box tip"><header><h4>Example 1</h4></header><div class="box-content"><blockquote><p><span class="codespan-content"><code>main.qd</code></span>:</p><pre><code class="language-markdown">.doctype {paged}
.theme {darko}
.pageformat margin:{1cm}

.function {greet}
    Hello!

[Introduction](introduction.qd)</code></pre></blockquote><blockquote><p><span class="codespan-content"><code>introduction.qd</code></span>:</p><pre><code class="language-markdown">No need to set the document up again, it&#39;s already inherited!

.greet</code></pre></blockquote></div></div><p>Unlike <a href="../Including-other-Quarkdown-files"><span class="codespan-content"><code>.include</code></span></a>, the context is <em>inherited</em>, not <em>shared</em>: changes made in the subdocument do not affect the referrer.</p><div class="box tip"><header><h4>Example 2</h4></header><div class="box-content"><p>The following example produces an error because <span class="codespan-content"><code>greet</code></span> is not defined in the referrer context:</p><blockquote><p><span class="codespan-content"><code>main.qd</code></span>:</p><pre><code class="language-markdown">[Introduction](introduction.qd)

.greet &lt;!-- Error: unresolved --&gt;</code></pre></blockquote><blockquote><p><span class="codespan-content"><code>introduction.qd</code></span>:</p><pre><code class="language-markdown">.function {greet}
    Hello!</code></pre></blockquote></div></div><h2 id="working-directory">Working directory</h2><p>The working directory of a subdocument is relative to the subdocument&rsquo;s entry point, not the referrer:</p><pre><code class="language-plaintext">main.qd
pages/
| introduction.qd
images/
| image.png</code></pre><p>Whereas <span class="codespan-content"><code>main.qd</code></span> can reference <span class="codespan-content"><code>images/image.png</code></span>, <span class="codespan-content"><code>introduction.qd</code></span> should reference it as <span class="codespan-content"><code>../images/image.png</code></span>.</p><blockquote><p>The <a href="../Media-storage">media storage system</a> can still store media files across subdocuments.</p></blockquote><h2 id="subdocument-graph">Subdocument graph</h2><p>Subdocuments are structured in a directed graph, where the edges are the links between them.</p><p>You can visualize the graph via the <strong><span class="codespan-content"><code>.subdocumentgraph</code></span></strong> function:</p><figure><img src="media/graph@1806253417.png" alt="Graph" style="width: 700.0px;" /></figure><h2 id="output">Output</h2><p>Subdocuments are exported differently depending on the output target.</p><h3 id="html">HTML</h3><p>Each subdocument is exported as a separate subdirectory in the same directory as <span class="codespan-content"><code>index.html</code></span>.</p><p>Configuration resources, such as themes and runtime scripts, are generated only once. <a href="../Media-storage">Media</a> is stored per subdocument instead.</p><pre><code class="language-plaintext">MyDocument/
|  media/
|  theme/
|  script/
|  introduction/
|  |  media/
|  |  index.html
|  conclusion/
|  |  media/
|  |  index.html
|  index.html</code></pre><h3 id="pdf">PDF</h3><p>Each subdocument is exported as a separate PDF file.</p><pre><code class="language-plaintext">MyDocument/
| index.pdf
| introduction.pdf
| conclusion.pdf</code></pre><blockquote class="note" style="--quote-type-label: 'Note';" data-labeled=""><p>Subdocument links in PDF output are not navigable yet.</p></blockquote><p>If only the root subdocument is present, then only <span class="codespan-content"><code>MyDocument.pdf</code></span> is generated without the need for a directory.</p><h3 id="minimizing-name-collisions">Minimizing name collisions</h3><p>Since the subdocument output files lie flatly in the same directory, it is possible that two subdocuments with the same name but from different directories end up colliding.</p><p>By default, Quarkdown accepts this collision-prone behavior in order to generate human-readable URLs.</p><p>If collisions cannot be avoided, launching the compiler with the <span class="codespan-content"><code>--no-subdoc-collisions</code></span> flag will append a hash to the output file names.</p>
        <div id="footnote-area"><div class="footnote-rule"></div></div>
        <div id="sibling-pages-button-area"></div>
        <footer>
            <div class="position-left"></div>
            <div class="position-center"></div>
            <div class="position-right"></div>
        </footer>
    </main>
    <aside id="margin-area-right" class="margin-area">
        <div class="position-top"></div>
        <div class="position-middle"></div>
        <div class="position-bottom"></div>
    </aside>
</div>
</body>
</html>